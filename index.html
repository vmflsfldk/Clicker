<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>블루 아카이브 전술 시뮬레이터</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div class="game">
        <header class="game__header">
            <h1>샬레 전술 훈련</h1>
            <div class="game__stats">
                <div class="stat">
                    <span class="stat__label">스테이지</span>
                    <span id="stage" class="stat__value">1</span>
                </div>
                <div class="stat">
                    <span class="stat__label">골드</span>
                    <span id="gold" class="stat__value">0</span>
                </div>
                <div class="stat">
                    <span class="stat__label">모집권</span>
                    <span id="gachaTokensHeader" class="stat__value">0</span>
                </div>
                <div class="stat">
                    <span class="stat__label">전술 공격력</span>
                    <span id="clickDamage" class="stat__value">1</span>
                </div>
                <div class="stat">
                    <span class="stat__label">총 지원 화력</span>
                    <span id="totalDps" class="stat__value">0</span>
                </div>
            </div>
        </header>

        <main class="game__main">
            <section class="game__enemy">
                <div class="enemy__info">
                    <div id="enemyName" class="enemy__name">훈련용 타깃</div>
                    <div class="enemy__health-bar">
                        <div id="enemyHealthBar" class="enemy__health-bar-fill"></div>
                    </div>
                    <div class="enemy__health">
                        <span id="enemyCurrentHp">10</span> / <span id="enemyMaxHp">10</span>
                    </div>
                    <div id="bossTimer" class="boss-timer" aria-live="polite"></div>
                </div>
                <div id="enemy" class="enemy">
                    <div class="enemy__sprite"></div>
                    <div id="damageIndicator" class="damage-indicator"></div>
                </div>
                <button id="tapButton" class="btn btn-primary">공격!</button>
                <div class="game__progress">
                    <div class="progress-track" id="stageProgressTrack"></div>
                </div>
            </section>

            <aside class="game__panel">
                <nav class="panel-tabs" role="tablist" aria-label="보조 패널">
                    <button
                        type="button"
                        class="panel-tab is-active"
                        id="tab-heroes"
                        role="tab"
                        aria-selected="true"
                        aria-controls="panel-heroes"
                        data-tab-target="heroes"
                    >
                        학생
                    </button>
                    <button
                        type="button"
                        class="panel-tab"
                        id="tab-rebirth"
                        role="tab"
                        aria-selected="false"
                        aria-controls="panel-rebirth"
                        data-tab-target="rebirth"
                        tabindex="-1"
                    >
                        환생
                    </button>
                    <button
                        type="button"
                        class="panel-tab"
                        id="tab-equipment"
                        role="tab"
                        aria-selected="false"
                        aria-controls="panel-equipment"
                        data-tab-target="equipment"
                        tabindex="-1"
                    >
                        전술 장비
                    </button>
                    <button
                        type="button"
                        class="panel-tab"
                        id="tab-log"
                        role="tab"
                        aria-selected="false"
                        aria-controls="panel-log"
                        data-tab-target="log"
                        tabindex="-1"
                    >
                        전투 로그
                    </button>
                </nav>

                <div class="panel-views">
                    <div
                        class="panel-view is-active"
                        id="panel-heroes"
                        role="tabpanel"
                        aria-labelledby="tab-heroes"
                        data-tab="heroes"
                    >
                        <section class="panel panel--hero">
                            <header class="panel__header">
                                <h2>학생</h2>
                                <button id="sortHeroes" class="btn btn-secondary">정렬 순서 변경</button>
                            </header>
                            <section class="gacha-panel" aria-label="학생 모집">
                                <div class="gacha-panel__header">
                                    <div>
                                        <h3 class="gacha-panel__title">학생 모집</h3>
                                        <p class="gacha-panel__hint">보스를 처치하면 일정 확률로 모집권을 획득합니다.</p>
                                    </div>
                                    <div class="gacha-panel__tokens">
                                        <span class="gacha-panel__tokens-label">보유 모집권</span>
                                        <strong id="gachaTokens" class="gacha-panel__tokens-value">0</strong>
                                    </div>
                                </div>
                                <div class="gacha-panel__actions">
                                    <button id="gachaSingle" class="btn btn-gacha" type="button">1회 모집 (1)</button>
                                    <button id="gachaTen" class="btn btn-gacha" type="button">10회 모집 (9)</button>
                                </div>
                                <p class="gacha-panel__notice">10회 모집 시 1회는 무료로 진행됩니다.</p>
                                <ul
                                    id="gachaResults"
                                    class="gacha-results"
                                    aria-live="polite"
                                    aria-label="최근 가챠 결과"
                                ></ul>
                                <p id="gachaResultsEmpty" class="gacha-results__empty">아직 모집 기록이 없습니다.</p>
                            </section>
                            <ul id="heroList" class="hero-list"></ul>
                        </section>

                        <section class="panel panel--upgrades">
                            <header class="panel__header">
                                <h2>샬레 지원 센터</h2>
                            </header>
                            <div class="upgrade">
                                <div>
                                    <h3>전술 교육 프로그램</h3>
                                    <p>학생의 기본 공격력을 강화합니다.</p>
                                </div>
                                <button id="upgradeClick" class="btn btn-upgrade">전술 교육 (10 골드)</button>
                            </div>
                            <div class="upgrade">
                                <div>
                                    <h3>아로나의 전술 지원</h3>
                                    <p>샬레의 지원 네트워크로 잠시 총 지원 화력을 2배로 높입니다.</p>
                                </div>
                                <button id="skillFrenzy" class="btn btn-skill">지원 요청 (쿨타임 60초)</button>
                                <p id="skillCooldown" class="cooldown"></p>
                            </div>
                        </section>
                    </div>

                    <div
                        class="panel-view"
                        id="panel-rebirth"
                        role="tabpanel"
                        aria-labelledby="tab-rebirth"
                        data-tab="rebirth"
                        hidden
                    >
                        <section class="panel panel--rebirth" id="rebirthPanel">
                            <header class="panel__header">
                                <h2>환생</h2>
                            </header>
                            <div class="rebirth__summary">
                                <div class="rebirth__stat">
                                    <span class="rebirth__label">환생 횟수</span>
                                    <strong id="rebirthCount">0</strong>
                                </div>
                                <div class="rebirth__stat">
                                    <span class="rebirth__label">최고 도달 층</span>
                                    <strong id="rebirthHighestStage">0</strong>
                                </div>
                                <div class="rebirth__stat">
                                    <span class="rebirth__label">이번 획득 예상</span>
                                    <strong id="rebirthPotential">0</strong>
                                </div>
                                <div class="rebirth__stat">
                                    <span class="rebirth__label">보유 포인트</span>
                                    <strong id="rebirthPoints">0</strong>
                                </div>
                            </div>
                            <button id="rebirthButton" class="btn btn-rebirth" disabled>환생하기</button>
                            <p id="rebirthRequirement" class="rebirth__requirement">100층을 돌파하면 환생할 수 있습니다.</p>
                            <div class="rebirth__skills">
                                <h3 class="rebirth__subheading">환생 스킬</h3>
                                <ul id="rebirthSkillList" class="rebirth-skill-list"></ul>
                            </div>
                        </section>
                    </div>

                    <div
                        class="panel-view"
                        id="panel-equipment"
                        role="tabpanel"
                        aria-labelledby="tab-equipment"
                        data-tab="equipment"
                        hidden
                    >
                        <section class="panel panel--equipment">
                            <header class="panel__header">
                                <h2>전술 장비</h2>
                            </header>
                            <p id="equipmentSummary" class="equipment__summary" aria-live="polite">
                                전술 공격력 +0.0% · 지원 화력 +0.0% · 전술 스킬 +0.0%
                            </p>
                            <div class="equipment__bonuses">
                                <div class="equipment__bonus">
                                    <span>전술 공격력</span>
                                    <strong id="equipmentTapBonus">+0%</strong>
                                </div>
                                <div class="equipment__bonus">
                                    <span>지원 화력</span>
                                    <strong id="equipmentHeroBonus">+0%</strong>
                                </div>
                                <div class="equipment__bonus">
                                    <span>전술 스킬</span>
                                    <strong id="equipmentSkillBonus">+0%</strong>
                                </div>
                            </div>
                            <div class="equipment__section">
                                <h3 class="equipment__subheading">장착 장비</h3>
                                <ul id="equipmentSlots" class="equipment-slots"></ul>
                            </div>
                            <div class="equipment__section">
                                <h3 class="equipment__subheading">인벤토리</h3>
                                <ul id="equipmentInventory" class="equipment-list"></ul>
                                <p id="equipmentEmpty" class="equipment-empty">아직 확보한 전술 장비가 없습니다.</p>
                            </div>
                        </section>
                    </div>

                    <div
                        class="panel-view"
                        id="panel-log"
                        role="tabpanel"
                        aria-labelledby="tab-log"
                        data-tab="log"
                        hidden
                    >
                        <section class="panel panel--log">
                            <header class="panel__header">
                                <h2>전투 로그</h2>
                            </header>
                            <ul id="log" class="log"></ul>
                        </section>
                    </div>
                </div>
            </aside>
        </main>

        <footer class="game__footer">
            <div>
                <button id="resetProgress" class="btn btn-secondary">초기화</button>
                <button id="saveProgress" class="btn btn-secondary">즉시 저장</button>
            </div>
            <p class="game__footer-text">비영리 블루 아카이브 팬게임을 위한 브라우저 전술 시뮬레이터 데모입니다.</p>
        </footer>
    </div>

    <template id="heroTemplate">
        <li class="hero" data-recruited="false">
            <div class="hero__info">
                <h3 class="hero__name"></h3>
                <p class="hero__desc"></p>
                <div class="hero__meta">
                    <span class="hero__level"></span>
                    <span class="hero__dps"></span>
                </div>
            </div>
            <div class="hero__status">
                <span class="hero__status-state"></span>
                <span class="hero__status-detail"></span>
            </div>
        </li>
    </template>

    <script src="script.js"></script>
</body>
</html>
