export const REBIRTH_EFFECT_LABELS = {
    tap: '전술 공격력',
    hero: '지원 화력',
    skill: '전술 스킬',
    gold: '작전 보상',
    critChance: '치명타 확률',
    critDamage: '치명타 피해',
    equipmentDrop: '전술 장비 드롭',
    gachaDrop: '모집권 드롭',
    rebirthGain: '환생 포인트',
};

export const REBIRTH_BRANCHES = [
    {
        id: 'assault',
        label: '공격 전술',
        description: '아로나와 대책위원회가 주도하는 화력 강화 노선입니다.',
        color: '#f87171',
    },
    {
        id: 'supply',
        label: '보급 관리',
        description: '작전 보상과 환생 효율을 최적화하는 보급 라인입니다.',
        color: '#fbbf24',
    },
    {
        id: 'drop',
        label: '전리품 확보',
        description: '장비와 모집권 드롭을 극대화하는 지원 라인입니다.',
        color: '#60a5fa',
    },
];

export const REBIRTH_TREE = {
    currencyId: 'rebirthCore',
    currencyLabel: '환생 코어',
    respecCost: 5,
    branches: REBIRTH_BRANCHES,
    nodes: [
        {
            id: 'rebirthCore',
            branch: 'core',
            name: '샬레 환생 관제',
            description: '환생 루프를 통제하는 샬레 본부의 기초 체계입니다.',
            effectDescription: '기본 환생 효율 +2%',
            effect: { rebirthGain: 0.02 },
            baseCost: 0,
            costGrowth: 0,
            maxLevel: 1,
            initialLevel: 1,
            position: { row: 0, column: 1 },
            prerequisites: [],
        },
        {
            id: 'tapPower',
            branch: 'assault',
            name: '아로나의 전술 분석',
            description: '아로나가 전투 데이터를 실시간으로 분석해 학생들의 조준을 돕습니다.',
            effectDescription: '레벨당 전술 공격력 +10%',
            effect: { tap: 0.1 },
            baseCost: 2,
            costGrowth: 2,
            maxLevel: 10,
            position: { row: 1, column: 0 },
            prerequisites: [{ node: 'rebirthCore', level: 1 }],
        },
        {
            id: 'precisionProtocol',
            branch: 'assault',
            name: '정밀 사격 프로토콜',
            description: '전장 데이터를 기반으로 치명타 확률을 끌어올리는 조준 알고리즘입니다.',
            effectDescription: '레벨당 치명타 확률 +1.5%',
            effect: { critChance: 0.015 },
            baseCost: 3,
            costGrowth: 3,
            maxLevel: 8,
            position: { row: 2, column: 0 },
            prerequisites: [{ node: 'tapPower', level: 3 }],
        },
        {
            id: 'heroCommand',
            branch: 'assault',
            name: '대책위원회 연계',
            description: '방과후 대책위원회가 팀워크로 지원 화력을 조율합니다.',
            effectDescription: '레벨당 지원 화력 +8%',
            effect: { hero: 0.08 },
            baseCost: 2,
            costGrowth: 3,
            maxLevel: 10,
            position: { row: 3, column: 0 },
            prerequisites: [
                { node: 'tapPower', level: 5 },
                { node: 'precisionProtocol', level: 3 },
            ],
        },
        {
            id: 'manaOverflow',
            branch: 'assault',
            name: '밀레니엄 전술 드론',
            description: '밀레니엄의 전술 드론이 전장 데이터를 공유해 지원 호출을 강화합니다.',
            effectDescription: '레벨당 전술 스킬 +6%',
            effect: { skill: 0.06 },
            baseCost: 3,
            costGrowth: 3,
            maxLevel: 10,
            position: { row: 4, column: 0 },
            prerequisites: [{ node: 'heroCommand', level: 5 }],
        },
        {
            id: 'goldSense',
            branch: 'supply',
            name: '게헨나 재무 감각',
            description: '게헨나의 운영 노하우로 작전 보상 회수를 극대화합니다.',
            effectDescription: '레벨당 작전 보상 +5%',
            effect: { gold: 0.05 },
            baseCost: 4,
            costGrowth: 4,
            maxLevel: 10,
            position: { row: 1, column: 1 },
            prerequisites: [{ node: 'rebirthCore', level: 1 }],
        },
        {
            id: 'supplyCorps',
            branch: 'supply',
            name: '샬레 보급 연합',
            description: '각 학원의 보급 부서를 연계해 안정적인 자원 공급망을 구성합니다.',
            effectDescription: '레벨당 작전 보상 +4%',
            effect: { gold: 0.04 },
            baseCost: 3,
            costGrowth: 3,
            maxLevel: 8,
            position: { row: 2, column: 1 },
            prerequisites: [{ node: 'goldSense', level: 3 }],
        },
        {
            id: 'rebirthInsight',
            branch: 'supply',
            name: '환생 기억 각성',
            description: '누적된 전투 경험이 새로운 시작을 더욱 강력하게 만들어 줍니다.',
            effectDescription: '레벨당 환생 포인트 +5%',
            effect: { rebirthGain: 0.05 },
            baseCost: 6,
            costGrowth: 6,
            maxLevel: 10,
            position: { row: 3, column: 1 },
            prerequisites: [{ node: 'supplyCorps', level: 4 }],
        },
        {
            id: 'salvageNetwork',
            branch: 'drop',
            name: '샬레 전리품 네트워크',
            description: '샬레 보급 관리국이 전장 보급망을 확충해 장비 회수를 체계화합니다.',
            effectDescription: '레벨당 전술 장비 드롭 확률 +10%',
            effect: { equipmentDrop: 0.1 },
            baseCost: 3,
            costGrowth: 4,
            maxLevel: 10,
            position: { row: 1, column: 2 },
            prerequisites: [{ node: 'rebirthCore', level: 1 }],
        },
        {
            id: 'bountyIntel',
            branch: 'drop',
            name: '현장 수색 정보망',
            description: '수색반이 전장 데이터를 공유하여 귀중한 전리품 위치를 빠르게 파악합니다.',
            effectDescription: '레벨당 전술 장비 드롭 확률 +5%',
            effect: { equipmentDrop: 0.05 },
            baseCost: 4,
            costGrowth: 4,
            maxLevel: 8,
            position: { row: 2, column: 2 },
            prerequisites: [{ node: 'salvageNetwork', level: 3 }],
        },
        {
            id: 'strategicRecruitment',
            branch: 'drop',
            name: '전략적 모집 네트워크',
            description: '각 학원의 협력 체계를 통해 보스 토벌 시 추가 모집권을 확보합니다.',
            effectDescription: '레벨당 모집권 드롭 확률 +4%',
            effect: { gachaDrop: 0.04 },
            baseCost: 4,
            costGrowth: 5,
            maxLevel: 10,
            position: { row: 3, column: 2 },
            prerequisites: [{ node: 'bountyIntel', level: 4 }],
        },
    ],
};

export const REBIRTH_NODES = REBIRTH_TREE.nodes;

export const REBIRTH_NODE_MAP = new Map(REBIRTH_NODES.map((node) => [node.id, node]));

export const REBIRTH_BRANCH_MAP = new Map(REBIRTH_BRANCHES.map((branch) => [branch.id, branch]));
